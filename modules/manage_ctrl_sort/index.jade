mixin manage_ctrl_sort(options)
    .form-group(data-module="manage_ctrl_sort",data-form-control="sort",db-name=options.db,db-collection=options.collection)
        ul#sortable
            - var list = options.value;
            - list.forEach(function(v){
                li.ui-state-default(data-id=v.id)
                    !=v.name     
            - })
            -var dataids = options.value.map(function(v){
            -    return v.id
            -})
        textarea.form-control(type="text",name=options.db)=dataids
    script.
      $(function() {
        var sort = $('#sortable');
        sort.sortable(function(data){});
        sort.sortable({ update: function(event, ui) {
                var ids = [];
                sort.find('li').each(function(i,v){
                    ids.push($(v).attr('data-id'));
                })
                $('textarea').val(ids);
            } 
        });   
        sort.disableSelection();
      });