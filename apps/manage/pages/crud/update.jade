extends ../../layouts/index

block append title

block append meta

block append stylesheet

block append headjs

block append content
  // Main content
  section.content
    form(role="form",data-module="manage_form",data-db=result.db,data-collection=result.collection)
      div
        - var data = result.data[result.db][result.collection];
        - var schema = result.data[result.schema.db][result.schema.collection];
        if data && data._id
          +manage_ctrl_input({
            name:'_id',
            type:'hidden',
            value:(data ? data._id + '' : '')
          })
        each field in schema.fields
          if field.type === 'input'
            +manage_ctrl_input({
              label:field.alias,
              name:field.name,
              value:data ? data[field.name] : field.defaults
            })
          else if field.type === 'password'
            +manage_ctrl_input({
              label:field.alias,
              name:field.name,
              value:data ? data[field.name] : '',
              type:'password'
            })
          else if field.type === 'category_tags'
            +manage_ctrl_tagsinput({
              label:field.alias,
              name:field.name,
              value: data ? data[field.name].join(' ') : '',
              db:'nyouhui',
              collection:'tags'
            })
      +manage_box({
        title:'表定义'
      })
      .form-group
        button.btn.btn-primary.btn-schema-add(type="submit") 确定
        | 
        a.btn.btn-default.btn-cancel 取消

block append footjs
  script(type="text/javascript",src="//static.nyouhui.com/dist/js/manage/crud.min.9fffd5d70bad2003.js")